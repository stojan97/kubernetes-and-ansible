- hosts: master
  become: true
  become_user: ubuntu
  tasks:
    - name: deploy db container
      shell: kubectl apply -f https://raw.githubusercontent.com/stojan97/kubernetes-and-ansible/dev/deployments/db-deployment.yaml >> db.txt
      args:
        chdir: $HOME
        creates: db.txt
        
    - name: deploy db service
      shell: kubectl apply -f https://raw.githubusercontent.com/stojan97/kubernetes-and-ansible/dev/deployments/db-service.yaml >> db_service.txt
      args:
        chdir: $HOME
        creates: db_service.txt    
        
    - name: deploy web container
      shell: kubectl apply -f https://raw.githubusercontent.com/stojan97/kubernetes-and-ansible/dev/deployments/web-deployment.yaml >> web.txt
      args:
        chdir: $HOME
        creates: web.txt

    - name: deploy web service
      shell: kubectl apply -f https://raw.githubusercontent.com/stojan97/kubernetes-and-ansible/dev/deployments/web-service.yaml >> web_service.txt
      args:
        chdir: $HOME
        creates: web_service.txt
